<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Commerce Platform - Case Study | Duc Le Nguyen</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-logo">
                <a href="../index.html">Duc Le Nguyen</a>
            </div>
            <div class="navbar-links">
                <a href="../index.html">About</a>
                <a href="../projects.html" class="active">Projects</a>
                <a href="../publications.html">Publications</a>
                <a href="../blog.html">Blog</a>
            </div>
            <div class="navbar-social">
                <a href="mailto:your.email@example.com" title="Email"><i class="fas fa-envelope"></i></a>
                <a href="https://linkedin.com/in/yourprofile" target="_blank" title="LinkedIn"><i class="fab fa-linkedin"></i></a>
                <a href="https://github.com/ducln-me" target="_blank" title="GitHub"><i class="fab fa-github"></i></a>
            </div>
            <button class="navbar-toggle" id="navbarToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-avatar">
                <img src="https://via.placeholder.com/150" alt="Duc Le Nguyen">
            </div>
            <h2>Duc Le Nguyen</h2>
            <p class="sidebar-title">Software Engineer & Researcher</p>
        </div>

        <nav class="sidebar-nav">
            <h3 class="sidebar-section-title">Case Study Sections</h3>
            <ul>
                <li><a href="#overview" class="nav-link active"><i class="fas fa-info-circle"></i> Overview</a></li>
                <li><a href="#use-cases" class="nav-link"><i class="fas fa-tasks"></i> Use Cases</a></li>
                <li><a href="#challenges" class="nav-link"><i class="fas fa-exclamation-triangle"></i> Challenges</a></li>
                <li><a href="#solutions" class="nav-link"><i class="fas fa-lightbulb"></i> Solutions</a></li>
                <li><a href="#architecture" class="nav-link"><i class="fas fa-sitemap"></i> Architecture</a></li>
                <li><a href="#results" class="nav-link"><i class="fas fa-chart-line"></i> Results</a></li>
                <li><a href="#resources" class="nav-link"><i class="fas fa-book"></i> Resources</a></li>
            </ul>
            <h3 class="sidebar-section-title">Navigation</h3>
            <ul>
                <li><a href="../projects.html#ecommerce-platform" class="nav-link"><i class="fas fa-arrow-left"></i> Back to Projects</a></li>
            </ul>
        </nav>

        <div class="sidebar-contact">
            <a href="mailto:your.email@example.com"><i class="fas fa-envelope"></i></a>
            <a href="https://github.com/ducln-me" target="_blank"><i class="fab fa-github"></i></a>
            <a href="https://linkedin.com/in/yourprofile" target="_blank"><i class="fab fa-linkedin"></i></a>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <article class="blog-post">
            <!-- Project Header -->
            <header class="blog-post-header">
                <div class="blog-post-meta">
                    <span class="category-badge project">Project Case Study</span>
                    <span class="post-date"><i class="fas fa-calendar"></i> September 2023</span>
                </div>
                <h1>E-Commerce Platform: Complete Case Study</h1>
                <p class="blog-post-subtitle">
                    Building a scalable e-commerce solution from concept to production - challenges, solutions, and lessons learned.
                </p>
                <div class="blog-post-tags">
                    <span class="article-tag">React</span>
                    <span class="article-tag">Node.js</span>
                    <span class="article-tag">MongoDB</span>
                    <span class="article-tag">Stripe</span>
                    <span class="article-tag">AWS</span>
                    <span class="article-tag">Redis</span>
                </div>
            </header>

            <div class="blog-post-image">
                <img src="https://via.placeholder.com/1200x600" alt="E-Commerce Platform">
            </div>

            <!-- Case Study Content -->
            <div class="blog-post-content">
                <section id="overview">
                    <h2>Project Overview</h2>
                    <p>
                        This case study details the complete journey of building a production-ready e-commerce platform
                        capable of handling thousands of concurrent users while maintaining high performance and reliability.
                        The platform was built from scratch using modern web technologies and cloud infrastructure.
                    </p>
                    <h3>Key Features</h3>
                    <ul>
                        <li><strong>Real-time Inventory Management</strong>: Live stock updates across all connected clients</li>
                        <li><strong>Secure Payment Processing</strong>: Stripe integration with PCI compliance</li>
                        <li><strong>Advanced Search</strong>: Elasticsearch-powered product discovery</li>
                        <li><strong>Admin Dashboard</strong>: Comprehensive analytics and management tools</li>
                        <li><strong>Multi-vendor Support</strong>: Platform for multiple sellers</li>
                    </ul>
                </section>

                <section id="use-cases">
                    <h2>Use Cases</h2>

                    <h3>1. Customer Shopping Experience</h3>
                    <p>
                        <strong>Scenario</strong>: A customer browses products, adds items to cart, and completes checkout.
                    </p>
                    <ul>
                        <li>Browse products with advanced filtering and sorting</li>
                        <li>Real-time stock availability updates</li>
                        <li>Secure checkout with multiple payment options</li>
                        <li>Order tracking and history</li>
                    </ul>

                    <h3>2. Vendor Management</h3>
                    <p>
                        <strong>Scenario</strong>: Vendors manage their product catalog and view sales analytics.
                    </p>
                    <ul>
                        <li>Product CRUD operations with image uploads</li>
                        <li>Inventory management and stock alerts</li>
                        <li>Sales analytics and revenue tracking</li>
                        <li>Order fulfillment workflow</li>
                    </ul>

                    <h3>3. Admin Operations</h3>
                    <p>
                        <strong>Scenario</strong>: Platform administrators monitor system health and manage users.
                    </p>
                    <ul>
                        <li>Real-time dashboard with key metrics</li>
                        <li>User and vendor management</li>
                        <li>System monitoring and alerts</li>
                        <li>Commission calculation and payouts</li>
                    </ul>
                </section>

                <section id="challenges">
                    <h2>Technical Challenges</h2>

                    <h3>Challenge 1: Race Conditions in Inventory</h3>
                    <div class="challenge-box">
                        <p><strong>Problem</strong>: Multiple users attempting to purchase the same item simultaneously led to overselling.</p>
                        <p><strong>Impact</strong>: Negative stock counts, order cancellations, customer dissatisfaction.</p>
                        <p><strong>Initial Approach</strong>: Simple decrement operations without proper locking.</p>
                    </div>

                    <h3>Challenge 2: Payment Processing Bottleneck</h3>
                    <div class="challenge-box">
                        <p><strong>Problem</strong>: Synchronous payment processing caused timeouts during high traffic.</p>
                        <p><strong>Impact</strong>: Failed checkouts, poor user experience, lost revenue.</p>
                        <p><strong>Initial Approach</strong>: Direct Stripe API calls in request handlers.</p>
                    </div>

                    <h3>Challenge 3: Search Performance</h3>
                    <div class="challenge-box">
                        <p><strong>Problem</strong>: MongoDB full-text search was slow with large product catalogs.</p>
                        <p><strong>Impact</strong>: Slow page loads, high database load, poor search relevance.</p>
                        <p><strong>Initial Approach</strong>: MongoDB $text queries with regex patterns.</p>
                    </div>
                </section>

                <section id="solutions">
                    <h2>Solutions Implemented</h2>

                    <h3>Solution 1: Optimistic Locking for Inventory</h3>
                    <pre><code>// Implementing optimistic locking with version numbers
const purchaseProduct = async (productId, quantity) => {
    const session = await mongoose.startSession();
    session.startTransaction();

    try {
        const product = await Product.findById(productId).session(session);

        if (product.stock < quantity) {
            throw new Error('Insufficient stock');
        }

        // Atomic update with version check
        const result = await Product.updateOne(
            {
                _id: productId,
                stock: { $gte: quantity },
                __v: product.__v  // Version check
            },
            {
                $inc: { stock: -quantity, __v: 1 },
                $set: { lastModified: new Date() }
            }
        ).session(session);

        if (result.modifiedCount === 0) {
            throw new Error('Concurrent modification detected');
        }

        await session.commitTransaction();

        // Broadcast inventory update
        redisClient.publish('inventory-update', JSON.stringify({
            productId,
            newStock: product.stock - quantity
        }));

        return result;
    } catch (error) {
        await session.abortTransaction();
        throw error;
    } finally {
        session.endSession();
    }
};</code></pre>

                    <h3>Solution 2: Asynchronous Payment Queue</h3>
                    <pre><code>// Using AWS SQS for async payment processing
const queuePayment = async (orderId, paymentDetails) => {
    // Add to queue immediately
    await sqs.sendMessage({
        QueueUrl: PAYMENT_QUEUE_URL,
        MessageBody: JSON.stringify({
            orderId,
            paymentDetails,
            timestamp: Date.now()
        })
    });

    // Return pending status to user
    return { status: 'pending', orderId };
};

// Worker processes payments from queue
const processPaymentQueue = async () => {
    const messages = await sqs.receiveMessage({
        QueueUrl: PAYMENT_QUEUE_URL,
        MaxNumberOfMessages: 10,
        WaitTimeSeconds: 20
    });

    for (const message of messages.Messages) {
        try {
            const { orderId, paymentDetails } = JSON.parse(message.Body);

            const paymentIntent = await stripe.paymentIntents.create({
                amount: paymentDetails.amount,
                currency: 'usd',
                metadata: { orderId }
            });

            await Order.updateOne(
                { _id: orderId },
                {
                    status: 'paid',
                    paymentIntentId: paymentIntent.id
                }
            );

            await sqs.deleteMessage({
                QueueUrl: PAYMENT_QUEUE_URL,
                ReceiptHandle: message.ReceiptHandle
            });
        } catch (error) {
            console.error('Payment processing error:', error);
            // Message will be retried
        }
    }
};</code></pre>

                    <h3>Solution 3: Elasticsearch Integration</h3>
                    <pre><code>// Indexing products in Elasticsearch
const indexProduct = async (product) => {
    await esClient.index({
        index: 'products',
        id: product._id.toString(),
        body: {
            name: product.name,
            description: product.description,
            category: product.category,
            tags: product.tags,
            price: product.price,
            stock: product.stock,
            rating: product.rating
        }
    });
};

// Advanced search with filters
const searchProducts = async (query, filters) => {
    const must = [
        {
            multi_match: {
                query: query,
                fields: ['name^3', 'description', 'tags^2'],
                fuzziness: 'AUTO'
            }
        }
    ];

    if (filters.category) {
        must.push({ term: { category: filters.category } });
    }

    if (filters.priceRange) {
        must.push({
            range: {
                price: {
                    gte: filters.priceRange.min,
                    lte: filters.priceRange.max
                }
            }
        });
    }

    const result = await esClient.search({
        index: 'products',
        body: {
            query: { bool: { must } },
            sort: [
                { _score: 'desc' },
                { rating: 'desc' }
            ],
            size: 20
        }
    });

    return result.hits.hits.map(hit => hit._source);
};</code></pre>
                </section>

                <section id="architecture">
                    <h2>System Architecture</h2>
                    <p>The platform follows a microservices architecture with the following components:</p>

                    <h3>Frontend Layer</h3>
                    <ul>
                        <li><strong>React SPA</strong>: Single-page application with React Router</li>
                        <li><strong>Redux</strong>: Centralized state management</li>
                        <li><strong>Material-UI</strong>: Consistent UI components</li>
                        <li><strong>Socket.io Client</strong>: Real-time updates</li>
                    </ul>

                    <h3>Backend Services</h3>
                    <ul>
                        <li><strong>API Gateway</strong>: Request routing and authentication (Node.js/Express)</li>
                        <li><strong>Product Service</strong>: Product catalog and inventory management</li>
                        <li><strong>Order Service</strong>: Order processing and fulfillment</li>
                        <li><strong>Payment Service</strong>: Payment processing with Stripe</li>
                        <li><strong>User Service</strong>: Authentication and user management</li>
                        <li><strong>Search Service</strong>: Elasticsearch-powered search</li>
                    </ul>

                    <h3>Data Layer</h3>
                    <ul>
                        <li><strong>MongoDB</strong>: Primary database for transactional data</li>
                        <li><strong>Redis</strong>: Caching and session storage</li>
                        <li><strong>Elasticsearch</strong>: Product search index</li>
                        <li><strong>AWS S3</strong>: Image and asset storage</li>
                    </ul>

                    <h3>Infrastructure</h3>
                    <ul>
                        <li><strong>AWS EC2</strong>: Application servers with auto-scaling</li>
                        <li><strong>AWS ELB</strong>: Load balancing</li>
                        <li><strong>AWS SQS</strong>: Message queuing for async tasks</li>
                        <li><strong>CloudFront</strong>: CDN for static assets</li>
                        <li><strong>Docker</strong>: Containerization</li>
                    </ul>
                </section>

                <section id="results">
                    <h2>Results & Impact</h2>

                    <div class="results-grid">
                        <div class="result-card">
                            <h3>10,000+</h3>
                            <p>Transactions Processed</p>
                        </div>
                        <div class="result-card">
                            <h3>99.9%</h3>
                            <p>Uptime Achieved</p>
                        </div>
                        <div class="result-card">
                            <h3>2s</h3>
                            <p>Average Page Load</p>
                        </div>
                        <div class="result-card">
                            <h3>1,000+</h3>
                            <p>Concurrent Users</p>
                        </div>
                    </div>

                    <h3>Performance Improvements</h3>
                    <ul>
                        <li>‚úÖ Reduced database query time by 70% through indexing and caching</li>
                        <li>‚úÖ Improved checkout completion rate by 25% with async payment processing</li>
                        <li>‚úÖ Decreased API response time from 500ms to under 100ms</li>
                        <li>‚úÖ Achieved 95+ Lighthouse score on all pages</li>
                        <li>‚úÖ Zero race condition incidents after implementing optimistic locking</li>
                        <li>‚úÖ Search relevance improved by 40% with Elasticsearch</li>
                    </ul>

                    <h3>Business Impact</h3>
                    <ul>
                        <li>üí∞ 25% increase in conversion rate</li>
                        <li>üìà 40% reduction in cart abandonment</li>
                        <li>‚≠ê 4.8/5 average customer rating</li>
                        <li>üöÄ Successfully scaled to 50+ vendors</li>
                    </ul>
                </section>

                <section id="resources">
                    <h2>Related Resources</h2>

                    <h3>Technical Blog Posts</h3>
                    <ul>
                        <li>
                            <a href="../blog/ecommerce-platform.html">
                                <i class="fas fa-book-open"></i> Building a Scalable E-Commerce Platform from Scratch
                            </a>
                            - Detailed technical implementation guide
                        </li>
                    </ul>

                    <h3>Source Code & Demo</h3>
                    <div class="project-links">
                        <a href="https://github.com/ducln-me/ecommerce-platform" class="btn-primary" target="_blank">
                            <i class="fab fa-github"></i> View Source Code
                        </a>
                        <a href="https://demo.example.com" class="btn-primary" target="_blank">
                            <i class="fas fa-external-link-alt"></i> Live Demo
                        </a>
                    </div>

                    <h3>Tech Stack Documentation</h3>
                    <ul>
                        <li><a href="https://reactjs.org" target="_blank">React Documentation</a></li>
                        <li><a href="https://nodejs.org" target="_blank">Node.js Documentation</a></li>
                        <li><a href="https://stripe.com/docs" target="_blank">Stripe API Reference</a></li>
                        <li><a href="https://www.elastic.co/guide" target="_blank">Elasticsearch Guide</a></li>
                    </ul>
                </section>

                <!-- Navigation -->
                <div class="blog-post-share">
                    <h3>Next Steps</h3>
                    <div class="share-buttons">
                        <a href="../projects.html#ecommerce-platform" class="share-btn twitter">
                            <i class="fas fa-arrow-left"></i> Back to Projects
                        </a>
                        <a href="../blog.html" class="share-btn linkedin">
                            <i class="fas fa-blog"></i> Read Blog Posts
                        </a>
                    </div>
                </div>
            </div>
        </article>
    </main>

    <!-- Scroll to Top Button -->
    <button class="scroll-top" id="scrollTop">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="../js/data-loader.js"></script>
    <script src="../script.js"></script>
</body>
</html>
